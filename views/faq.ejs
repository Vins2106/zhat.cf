<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include("./parts/betahead.ejs") %>
  </head>
    
    <button class="btn btn-primary" onclick="location.href = '/'" style="margin: 10px;">
      Back
    </button>
    
    <h1 style="text-align: center; color: black;">
      Frequently Asked Questions
    </h1>
    
    <div class="faq-list">
    <div class="faq" id="how-to-change-user-settings">
      <h2 onclick="navigator.clipboard.writeText(window.location.href.split('#')[0]  + '#how-to-change-user-settings');" style="margin-bottom: 15px;">
        How to change user settings?
      </h2>
      <p>
        Go to <a href="/">Home</a> and click your <strong>username</strong> or <strong>gear button</strong>, here you are!
      </p>
    </div>  
    <div class="faq" id="cant-change-avatar">
      <h2 onclick="navigator.clipboard.writeText(window.location.href.split('#')[0] + '#cant-change-avatar');" style="margin-bottom: 15px;">
        Can't change avatar
      </h2>
      <p>
        Make sure your avatar type is <strong>png, jpg, or gif</strong>
      </p>
    </div>    
    <div class="faq" id="how-to-add-contact">
      <h2 onclick="navigator.clipboard.writeText(window.location.href.split('#')[0] + '#how-to-add-contact');" style="margin-bottom: 15px;">
        How to add contact?
      </h2>
      <p>
        Go to <a href="/me">Home</a> and click <strong>plus button</strong> on bottom, add contact with user id.
      </p>
    </div> 
    <div class="faq" id="get-user-id">
      <h2 onclick="navigator.clipboard.writeText(window.location.href.split('#')[0] + '#get-user-id');" style="margin-bottom: 15px;">
        Get user id
      </h2>
      <p>
        Go to <a href="/me/settings">User Settings</a> and copy <strong>User ID</strong> with clicking
      </p>
    </div>       
    </div>
    
    <script src="https://cdn.socket.io/4.1.2/socket.io.min.js" integrity="sha384-toS6mmwu70G0fw54EGlWWeA4z3dyJ+dlXBtSURSKN4vyRFOcxd3Bzjj/AoOwY+Rg" crossorigin="anonymous">
    </script>
    <script>
    let socket = io();
      
      console.log("connected")
      socket.emit("isConnected", '<%= req.session.user.UID %>')
                  
      socket.on("someoneOnline", userId => {
        let user = document.getElementById(userId);
        if (!user) return;
      
        
        user.classList.remove("offline")
        user.classList.add("online")
        user.innerHTML = '<i class="fa fa-check"></i> online'  
      })
      
      socket.on("newMessage", (opt) => {
        let user = document.getElementById(`${opt.id}-lastmsg`);
        if (opt.to !== '<%= req.session.user.UID %>') return;
        if (!user) return;
        
        user.innerHTML = `${opt.id == '<%= req.session.user.UID %>' ? '(you):' : '(new messages):'} ${opt.msg}`;
      })
                  
      socket.on("isOnline", userId => {
        socket.emit("updateOnline", '<%= req.session.user.UID %>')
        let user = document.getElementById(userId);
        if (!user) return;
        console.log(`${userId} is online`)
        
        user.classList.remove("remove")
        user.classList.add("online")
        user.innerHTML = '<i class="fa fa-check"></i> online';
      });
      
      socket.on("isOffline", userId => {
        let user = document.getElementById(userId);
        if (!user) return;
        console.log(`${userId} is offline`)
        
        user.classList.remove("online")
        user.classList.add("offline")
        user.innerHTML = '<i class="fa fa-times"></i> offline';        
      })
      
    </script>   
  </body>
</html>